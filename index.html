<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Preload</title>
    <link rel="stylesheet" href="css/app.css">
</head>
<body>
    <section class="h-padding_vertical_extralarge h-padding_horizontal_medium h-background_color_gray">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-10 h-text_align_center">
                    <img class="h-margin_bottom_small" width="128" height="128" src="https://github.com/bautrukevich/preload/raw/master/preload.svg?sanitize=true" alt="" style="max-width:100%;">
                    <h1 class="h-margin_bottom_medium h-text_align_center">Preload</h1>
                    <p class="h-text_resize_body">It's a small library for preload images in browser.</p>
                </div>
            </div>
        </div>
    </section>
    <section class="h-padding_vertical_extralarge h-padding_horizontal_medium">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <h4 class="h-margin_bottom_small">The problem</h4>
                <p class="h-text_resize_body h-margin_bottom_large">Large or a lot of image files may take a second or two to load on the page. Preloading those images early rather than later helps ensure that visitors have a great experience viewing your content.</p>
                <h4 class="h-margin_bottom_small">The solution</h4>
                <p class="h-text_resize_body h-margin_bottom_large">JavaScript includes the Image among its native object types. The Image object represents an HTML image tag on the page and exposes the same properties and events. Perhaps oddly, the Image has no constructor that accepts an image source, so an image must be loaded into the object by setting its src attribute. Doing so causes the image to be downloaded from the server at that point.</p>
            </div>
        </div>
        <div class="row justify-content-center h-margin_bottom_medium">
            <div class="col-md-10">
                <h4 class="h-margin_bottom_small">Example</h4>
                <p class="h-text_size_body h-margin_bottom_small">First image receive src after loading and second was added dynamically:</p>
                <div class="h-margin_bottom_medium">
                    <pre>
                        <code class="language-javascript">
    import preload from '@bautrukevich/preload';

    const IMAGE_URL = 'https://www.google.ru/images/branding/googlelogo/2x/googlelogo_color_120x44dp.png';
    
    preload(IMAGE_URL).then(loaded => {
      console.log(loaded); // [[HTMLImageElement, 'loaded']]
      let loadedImageElement = loaded[0][0];
      let image = document.getElementById('image');
    
      // Firs image
      let inserted = image.parentNode.insertBefore(loadedImageElement, image.nextSibling);
      inserted.height = 44;
    
      // Second image
      image.src = loadedImageElement.src;
    }, failed => {
      console.log(failed);
    });
                        </code>
                    </pre>
                    
                </div>
                <img id="image" class="h-margin_right_small" src="" alt="" height="44px">
            </div>
        </div>
        <div class="row justify-content-center h-margin_bottom_medium">
            <div class="col-md-10">
                <h4 class="h-margin_bottom_small">More cases</h4>
                <div class="h-margin_bottom_small">
                    <pre>
                        <code class="language-javascript">
    import preload from '@bautrukevich/preload';
    
    const IMAGE_URL = 'https://www.google.ru/images/branding/googlelogo/2x/googlelogo_color_120x44dp.png';
    let orImageWithSrc = new Image();
    let orImageWithoutSrc = new Image(); // it's valid and you can set src later
    orImageWithSrc.src = IMAGE_URL;
    
    // It would be resolved
    preload(IMAGE_URL, orImageWithSrc).then(resolved => {
      console.log(resolved); // [[HTMLImageElement, 'loaded'], [HTMLImageElement, 'loaded']]
    }, rejected => {
      console.log(rejected);
    });
    
    // It would be rejected
    preload(orImageWithoutSrc).then(resolved => {
      console.log(resolved);
    }, rejected => {
      console.log(rejected); // [[HTMLImageElement, 'new']]
    });
    
    // It would be rejected â€” if at least one image was not loaded
    preload(IMAGE_URL, orImageWithoutSrc).then(resolved => {
      console.log(resolved);
    }, rejected => {
      console.log(rejected); // [[HTMLImageElement, 'loaded'], [HTMLImageElement, 'new']]
    });
                        </code>
                    </pre>
                </div>
            </div>
        </div>
    </section>
    <script type="text/javascript" src="js/app.js"></script>
</body>
</html>
