# Preload

<img align="right" width="64" height="64"
         src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MCA1MCI+ICAgIDxwYXRoIGZpbGw9IiM0OTlkZjIiIHN0eWxlPSJsaW5lLWhlaWdodDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbi1saW5lOm5vbmU7dGV4dC1kZWNvcmF0aW9uLXN0eWxlOnNvbGlkO3RleHQtZGVjb3JhdGlvbi1jb2xvcjojNDk5ZGYyO3RleHQtdHJhbnNmb3JtOm5vbmU7YmxvY2stcHJvZ3Jlc3Npb246dGI7aXNvbGF0aW9uOmF1dG87bWl4LWJsZW5kLW1vZGU6bm9ybWFsIiBkPSJNIDI1LjAwNTg1OSAyLjAwMTk1MzEgQyAxNS40OTM0MDQgMi4wMDE5NTMxIDcuMzMwNTQxNSA3Ljc5MDU3NDggMy44MzM5ODQ0IDE2LjAzOTA2MiBBIDEuMDAwMSAxLjAwMDEgMCAwIDAgMy43Njc1NzgxIDE2LjE3MzgyOCBDIDMuNjgzNzc0MSAxNi4zNzU2OSAzLjYxNjY5MSAxNi41ODAyNTEgMy41MzkwNjI1IDE2Ljc4MzIwMyBDIDMuNDM0MDU4IDE3LjA1NzI0MyAzLjMyMzIxNDIgMTcuMzI4NDQ4IDMuMjI4NTE1NiAxNy42MDc0MjIgQyAzLjA1NTQ3MTEgMTguMTE2NzIyIDIuODk5NzMzNCAxOC42Mjg5ODYgMi43NjM2NzE5IDE5LjE0MjU3OCBBIDEuMDAwMSAxLjAwMDEgMCAwIDAgMi43NTk3NjU2IDE5LjE1ODIwMyBDIDIuNzUxNjM0IDE5LjE4OTI1NCAyLjc0MDQyNjcgMTkuMjE4ODk4IDIuNzMyNDIxOSAxOS4yNSBBIDEuMDAwNDg4MiAxLjAwMDQ4ODIgMCAwIDAgNC42Njk5MjE5IDE5Ljc1IEMgNC42NzM2NDMxIDE5LjczNTU0MiA0LjY3Nzg4OTQgMTkuNzIxNDc3IDQuNjgxNjQwNiAxOS43MDcwMzEgQyA0LjgxMDI3NjQgMTkuMjExNjQ1IDQuOTYxODM5OCAxOC43MjY1NzcgNS4xMjUgMTguMjQ2MDk0IEMgNS4yMTEyNDE4IDE3Ljk5MjQ1NiA1LjMxMTYzOSAxNy43NDA0NTMgNS40MDgyMDMxIDE3LjQ4ODI4MSBDIDguNDMwNTI3NiA5LjYwNzczNjMgMTYuMDQ4OTcxIDQuMDAxOTUzMSAyNS4wMDU4NTkgNC4wMDE5NTMxIEMgMzYuNjE0NDAzIDQuMDAxOTUzMSA0Ni4wMDM5MDYgMTMuMzkxNDU2IDQ2LjAwMzkwNiAyNSBBIDEuMDAwMSAxLjAwMDEgMCAxIDAgNDguMDAzOTA2IDI1IEMgNDguMDAzOTA2IDEyLjMxMDU0NCAzNy42OTUzMTUgMi4wMDE5NTMxIDI1LjAwNTg1OSAyLjAwMTk1MzEgeiBNIDIuNzA4OTg0NCAyNC4wOTE3OTcgTCAyLjA2NDQ1MzEgMjQuNzE0ODQ0IEwgMi4wMDc4MTI1IDI1LjA2MjUgTCAyLjAyMzQzNzUgMjYuMDAzOTA2IEwgMi4wMjUzOTA2IDI2LjAzMzIwMyBMIDIuMDI3MzQzOCAyNi4wNjA1NDcgTCAyLjExOTE0MDYgMjcuMzA4NTk0IEwgMi4xMjEwOTM4IDI3LjMzNzg5MSBMIDIuMTI1IDI3LjM2NTIzNCBMIDIuMjg5MDYyNSAyOC42MDM1MTYgTCAyLjI5Mjk2ODggMjguNjMwODU5IEwgMi4yOTg4MjgxIDI4LjY1ODIwMyBMIDIuNTI5Mjk2OSAyOS44ODI4MTIgTCAyLjUzNTE1NjIgMjkuOTEwMTU2IEwgMi41NDI5Njg4IDI5LjkzNzUgTCAyLjc4OTA2MjUgMzAuOTI5Njg4IEwgMy4zNzMwNDY5IDMxLjYxMTMyOCBMIDQuMjY3NTc4MSAzMS41NTA3ODEgTCA0Ljc1MzkwNjIgMzAuNzk4ODI4IEwgNC43MzA0Njg4IDMwLjQ0NzI2NiBMIDQuNDg4MjgxMiAyOS40NzQ2MDkgTCA0LjI3MTQ4NDQgMjguMzQxNzk3IEwgNC4yNjk1MzEyIDI4LjMyNDIxOSBMIDQuMTEzMjgxMiAyNy4xMzQ3NjYgTCA0LjAyMzQzNzUgMjUuOTI5Njg4IEwgNC4wMjE0ODQ0IDI1LjkxMjEwOSBMIDQuMDA3ODEyNSAyNS4wMjkyOTcgTCAzLjU5Mzc1IDI0LjIzNDM3NSBMIDIuNzA4OTg0NCAyNC4wOTE3OTcgeiBNIDYuMDUyNzM0NCAzNC45NTUwNzggTCA1LjIwODk4NDQgMzUuMjYxNzE5IEwgNC45NDkyMTg4IDM2LjExOTE0MSBMIDUuMDcwMzEyNSAzNi40NDkyMTkgTCA1LjQyNTc4MTIgMzcuMDY0NDUzIEwgNS40NDE0MDYyIDM3LjA4OTg0NCBMIDUuNDU1MDc4MSAzNy4xMTMyODEgTCA2LjEzODY3MTkgMzguMTUyMzQ0IEwgNi4xNTQyOTY5IDM4LjE3NTc4MSBMIDYuMTcxODc1IDM4LjE5OTIxOSBMIDYuOTE0MDYyNSAzOS4yMDExNzIgTCA2LjkyOTY4NzUgMzkuMjI0NjA5IEwgNi45NDkyMTg4IDM5LjI0NjA5NCBMIDcuNzQ4MDQ2OSA0MC4yMDcwMzEgTCA3Ljc2NzU3ODEgNDAuMjI4NTE2IEwgNy43ODcxMDk0IDQwLjI1IEwgOC42NDQ1MzEyIDQxLjE2Nzk2OSBMIDkuNDg0Mzc1IDQxLjQ3ODUxNiBMIDEwLjIzNjMyOCA0MC45OTIxODggTCAxMC4yOTY4NzUgNDAuMDk3NjU2IEwgMTAuMTA1NDY5IDM5LjgwMjczNCBMIDkuMjU5NzY1NiAzOC44OTg0MzggTCA5LjI0ODA0NjkgMzguODg0NzY2IEwgOC41MDE5NTMxIDM3Ljk4NjMyOCBMIDcuODEwNTQ2OSAzNy4wNTQ2ODggTCA3LjE1ODIwMzEgMzYuMDY0NDUzIEwgNy4xNTIzNDM4IDM2LjA1MjczNCBMIDYuODAwNzgxMiAzNS40NDcyNjYgTCA2LjA1MjczNDQgMzQuOTU1MDc4IHogTSA0MC4zODg2NzIgMzkuNzEwOTM4IEEgMS4wMDAxIDEuMDAwMSAwIDAgMCAzOS42OTkyMTkgNDAuMDA1ODU5IEMgMzkuNDcxMzI4IDQwLjIyODk4MyAzOS4yMzk0MyA0MC40NDY0NzcgMzkuMDAxOTUzIDQwLjY1ODIwMyBBIDEuMDAwMSAxLjAwMDEgMCAxIDAgNDAuMzMyMDMxIDQyLjE1MDM5MSBDIDQwLjU5MjU1NCA0MS45MTgxMTcgNDAuODQ3NTQ3IDQxLjY4MDQyMyA0MS4wOTc2NTYgNDEuNDM1NTQ3IEEgMS4wMDAxIDEuMDAwMSAwIDAgMCA0MC4zODg2NzIgMzkuNzEwOTM4IHogTSAxMy44MDg1OTQgNDIuOTcwNzAzIEEgMS4wMDAxIDEuMDAwMSAwIDAgMCAxMy4zNzMwNDcgNDQuODM5ODQ0IEMgMTQuMjYzNjc2IDQ1LjM2MDQyMiAxNS4yMDAwMjMgNDUuODI5MDA1IDE2LjE3OTY4OCA0Ni4yMzYzMjggQSAxLjAwMDM3NiAxLjAwMDM3NiAwIDAgMCAxNi4yMzQzNzUgNDYuMjU1ODU5IEMgMTYuNTQwMzc3IDQ2LjM4MjY4IDE2Ljg0NzcxOSA0Ni41MDM0OTEgMTcuMTU2MjUgNDYuNjE1MjM0IEEgMS4wMDAxIDEuMDAwMSAwIDEgMCAxNy44MzU5MzggNDQuNzM0Mzc1IEMgMTcuNTM4Nzg4IDQ0LjYyNjc1NCAxNy4yNDMyMzkgNDQuNTExNDE4IDE2Ljk0OTIxOSA0NC4zODg2NzIgQSAxLjAwMDEgMS4wMDAxIDAgMCAwIDE2Ljk0NzI2NiA0NC4zODg2NzIgQyAxNi4wNTA5MyA0NC4wMTU5OTUgMTUuMTk2MTg1IDQzLjU4ODcwMyAxNC4zODI4MTIgNDMuMTEzMjgxIEEgMS4wMDAxIDEuMDAwMSAwIDAgMCAxMy44MDg1OTQgNDIuOTcwNzAzIHogTSAzNC4yMjY1NjIgNDMuOTQ3MjY2IEwgMzMuODg0NzY2IDQ0LjAyNzM0NCBMIDMyLjg1NzQyMiA0NC40NzI2NTYgTCAzMi44NDM3NSA0NC40Nzg1MTYgTCAzMS45NDE0MDYgNDQuODAyNzM0IEwgMzEuMzI0MjE5IDQ1LjQ1MzEyNSBMIDMxLjQ3NDYwOSA0Ni4zMzU5MzggTCAzMi4yNzM0MzggNDYuNzQ0MTQxIEwgMzIuNjE5MTQxIDQ2LjY4NTU0NyBMIDMzLjUzNTE1NiA0Ni4zNTU0NjkgTCAzMy41NjQ0NTMgNDYuMzQzNzUgTCAzMy41OTM3NSA0Ni4zMzIwMzEgTCAzNC42Nzc3MzQgNDUuODYzMjgxIEwgMzUuMjUzOTA2IDQ1LjE3NTc4MSBMIDM1LjA0ODgyOCA0NC4zMDQ2ODggTCAzNC4yMjY1NjIgNDMuOTQ3MjY2IHogTSAyNS45MDIzNDQgNDUuOTY4NzUgTCAyNS40MDQyOTcgNDUuOTk4MDQ3IEwgMjMuODQ5NjA5IDQ1Ljk3MDcwMyBMIDIzLjg0OTYwOSA0NS45OTIxODggTCAyMy4wNjI1IDQ2LjMwMDc4MSBMIDIyLjgyNjE3MiA0Ny4xNjQwNjIgTCAyMy4zNzY5NTMgNDcuODcxMDk0IEwgMjMuNzE2Nzk3IDQ3Ljk2NDg0NCBMIDIzLjc0NDE0MSA0Ny45NjY3OTcgTCAyMy43ODEyNSA0Ny45NzA3MDMgTCAyMy44MTgzNTkgNDcuOTcwNzAzIEwgMjUuNDI3NzM0IDQ3Ljk5ODA0NyBMIDI1LjQ2NDg0NCA0Ny45OTgwNDcgTCAyNS41MDE5NTMgNDcuOTk2MDk0IEwgMjYuMDE3NTc4IDQ3Ljk2Njc5NyBMIDI2Ljc5NDkyMiA0Ny41MTk1MzEgTCAyNi45MDIzNDQgNDYuNjMwODU5IEwgMjYuMjUzOTA2IDQ2LjAxMTcxOSBMIDI1LjkwMjM0NCA0NS45Njg3NSB6IiBmb250LXdlaWdodD0iNDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgd2hpdGUtc3BhY2U9Im5vcm1hbCIgb3ZlcmZsb3c9InZpc2libGUiPjwvcGF0aD48L3N2Zz4="
         alt="">

[![NPM version][npm-img]][npm-link]

[npm-img]: http://img.shields.io/npm/v/@bautrukevich/preload.svg
[npm-link]: https://www.npmjs.com/package/@bautrukevich/preload

It's a small library for preload images in browser.

[See demo](https://bautrukevich.github.io/preload/)

## Usage

#### Usage from npm

First of all you need to install it from npm using

```yarn add @bautrukevich/preload``` 

or 

```npm install @bautrukevich/preload --save```

After you can import it and use like this:

```js
import preload from '@bautrukevich/preload';

let orImageWithSrc = new Image();
orImageWithSrc.src = '/url/path/to/image';
let orImageWithoutSrc = new Image(); // it's valid and you can set src later

const result = preload('/url/path/to/image', orImageWithSrc, orImageWithoutSrc)
    .then(resolved => {
      console.log(resolved);
    }, rejected => {
      console.log(rejected);
    });
```

```preload``` function accept any number of arguments such as ```URL (string)``` or ```HTMLImageElement (new Image() or document.createElement('img'))``` and return ```Promise``` with ```[[source, 'state'], [source, 'state']...]```, where ```source``` — HTMLImageElement and ```state``` — state of his loading (can be ```'new'```, ```'loaded'```, ```'failed'```).

#### Usage from dist

You can simply install library using npm or download and add script ```/dist/preload.min.js``` to your page and use ```preload()``` function.

## Scripts

You can use npm or yarn (as you wish).

```yarn build``` or ```npm run build``` — build UMD library

```yarn dev``` or ```npm run dev``` — for development. With opening browser use ```yarn dev --open``` or ```npm run dev --open```.

```yarn test``` or ```npm run test``` — run tests once.

```yarn test:watch``` or ```npm run test:watch``` — run tests in watch mode.

## Browser support

Last 2 versions. No IE.
